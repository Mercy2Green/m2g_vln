# Config file content template:

# dataset matterport
# n_images 2358
# depth_directory undistorted_depth_images
# color_directory undistorted_color_images

# intrinsics_matrix 1076.45 0 631.116  0 1077.19 509.202  0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d0_0.png 03a8325e3b054e3fad7e1e7091f9d283_i0_0.jpg 0.90525 0.275848 0.323155 -2.99825 0.42464 -0.612795 -0.666455 -14.4532 0.0141878 0.740533 -0.67187 1.33124 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d0_1.png 03a8325e3b054e3fad7e1e7091f9d283_i0_1.jpg 0.820534 -0.381542 -0.425615 -2.98374 -0.571596 -0.547236 -0.6114 -14.4543 0.000362848 0.744955 -0.667115 1.33115 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d0_2.png 03a8325e3b054e3fad7e1e7091f9d283_i0_2.jpg -0.0846661 -0.653405 -0.752259 -2.97748 -0.996408 0.0548167 0.0645317 -14.4674 -0.000928868 0.755021 -0.6557 1.33093 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d0_3.png 03a8325e3b054e3fad7e1e7091f9d283_i0_3.jpg -0.90513 -0.267872 -0.330125 -2.98573 -0.424975 0.591297 0.685393 -14.4794 0.0116044 0.760665 -0.649041 1.3308 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d0_4.png 03a8325e3b054e3fad7e1e7091f9d283_i0_4.jpg -0.820375 0.389515 0.418642 -3.00023 0.571259 0.525712 0.630309 -14.4783 0.0254291 0.756243 -0.653796 1.33089 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d0_5.png 03a8325e3b054e3fad7e1e7091f9d283_i0_5.jpg 0.0848417 0.661354 0.74526 -3.00649 0.996035 -0.076351 -0.0456356 -14.4651 0.0267202 0.746177 -0.665211 1.33112 0 0 0 1

# intrinsics_matrix 1076.01 0 635.509  0 1076.38 511.999  0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d1_0.png 03a8325e3b054e3fad7e1e7091f9d283_i1_0.jpg 0.902625 -0.00853222 0.430341 -2.99332 0.430149 -0.017951 -0.902578 -14.4636 0.0154264 0.999802 -0.0125343 1.36432 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d1_1.png 03a8325e3b054e3fad7e1e7091f9d283_i1_1.jpg 0.82401 -0.00475809 -0.566553 -2.98983 -0.56657 -0.00416342 -0.824001 -14.4639 0.00156227 0.999979 -0.00612788 1.3643 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d1_2.png 03a8325e3b054e3fad7e1e7091f9d283_i1_2.jpg -0.0785585 0.00907021 -0.996867 -2.98832 -0.996908 -0.000537117 0.0785572 -14.467 0.000177485 0.999958 0.009083 1.36425 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d1_3.png 03a8325e3b054e3fad7e1e7091f9d283_i1_3.jpg -0.902493 0.0191241 -0.430278 -2.99031 -0.430517 -0.0106985 0.902519 -14.4699 0.0126569 0.999759 0.0178871 1.36422 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d1_4.png 03a8325e3b054e3fad7e1e7091f9d283_i1_4.jpg -0.823839 0.0153494 0.566614 -2.99379 0.5662 -0.0244859 0.823903 -14.4697 0.0265208 0.999582 0.0114802 1.36424 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d1_5.png 03a8325e3b054e3fad7e1e7091f9d283_i1_5.jpg 0.0787463 0.00152096 0.996893 -2.9953 0.996503 -0.0281116 -0.078673 -14.4665 0.027905 0.999603 -0.00373071 1.36429 0 0 0 1

# intrinsics_matrix 1074.56 0 639.97  0 1074.73 508.007  0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d2_0.png 03a8325e3b054e3fad7e1e7091f9d283_i2_0.jpg 0.903099 -0.28773 0.318784 -2.9979 0.429336 0.589254 -0.684435 -14.4541 0.0090875 0.754978 0.655687 1.39774 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d2_1.png 03a8325e3b054e3fad7e1e7091f9d283_i2_1.jpg 0.823448 0.377731 -0.423383 -2.98339 -0.567372 0.541901 -0.620026 -14.4553 -0.00477103 0.750774 0.660541 1.39764 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d2_2.png 03a8325e3b054e3fad7e1e7091f9d283_i2_2.jpg -0.0796293 0.669398 -0.738624 -2.97713 -0.996806 -0.0580366 0.0548659 -14.4684 -0.00614017 0.740634 0.671881 1.39742 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d2_3.png 03a8325e3b054e3fad7e1e7091f9d283_i2_3.jpg -0.903034 0.295597 -0.311691 -2.98537 -0.429522 -0.610609 0.665333 -14.4804 0.00634922 0.734697 0.678366 1.39729 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d2_4.png 03a8325e3b054e3fad7e1e7091f9d283_i2_4.jpg -0.823344 -0.369862 0.430474 -2.99988 0.567183 -0.56323 0.600895 -14.4792 0.0202075 0.738901 0.673511 1.39739 0 0 0 1
# scan 03a8325e3b054e3fad7e1e7091f9d283_d2_5.png 03a8325e3b054e3fad7e1e7091f9d283_i2_5.jpg 0.0797502 -0.661505 0.745688 -3.00614 0.996581 0.0367193 -0.0740088 -14.4661 0.021576 0.749041 0.662172 1.39761 0 0 0 1

# I need to sepreate the config data into 4 list.
# The first list is color images, the second list is depth images, the third list is intrinsics matrix, the fourth list is poses.
# Each list should have the same length, and they should be matched by the same index.
# please generate the code

import os
import torch

color_images = []
depth_images = []
intrinsics_matrix = []
poses = []
last_intrinsics_matrix = None

input_folder = "/media/m2g/Data/Datasets/"

image_folder = "undistorted_rgb_images"
depth_folder = "undistorted_depth_images"

with open('/media/m2g/Data/Datasets/m2g_vln_server/m2g_vln/concept-graphs/conceptgraph/dataset/dataconfigs/R2R_original_cam_pose_file/1LXtFkjw3qL.conf', 'r') as file:
    for line in file:
        if line.startswith('scan'):
            parts = line.split()
            depth_images.append(os.path.join(input_folder, depth_folder, parts[1]))
            color_images.append(os.path.join(input_folder, image_folder, parts[2]))
            poses.append(torch.tensor([float(i) for i in parts[3:19]]).reshape(4, 4))
            if last_intrinsics_matrix is not None:
                intrinsics_matrix.append(last_intrinsics_matrix)
        elif line.startswith('intrinsics_matrix'):
            parts = line.split()
            last_intrinsics_matrix = [float(parts[i]) for i in [1, 5, 3, 6]]  # Swap 3rd and 5th elements

# Ensure all lists have the same length
# assert len(color_images) == len(depth_images) == len(intrinsics_matrix) == len(poses)

# print all lists
# print(len(color_images))
# print(len(depth_images))
# print(len(intrinsics_matrix))
# print(len(poses))

# print(color_images)
# print(intrinsics_matrix)

print(poses)
